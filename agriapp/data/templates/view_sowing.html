{% extends "base.html" %}

{% block title %}
View Sowing Information
{% endblock %}

{% block content %}
<div class="col align-self-start mx-1">	

	{% if result is defined %}
    {% if result %}
  	<div class="col text-center mt-2">      
      <p class="fs-4">Showing all sowing data for {{season}}, {{ year }}</p>
    </div>    
      
    <table class="table table-hover">
    	<thead> 
    		<tr>  
          <th scope="col">#</th>  
          <th scope="col">Location</th>						
    			<th scope="col">Area (Acres)</th>
    			<th scope="col">Variety</th>
    			<th scope="col" class="align-center">Bags</th>
    			<th scope="col">Sowed On</th>
          <th scope="col">Expected Harvest</th>
    		</tr>   		
    	</thead>
    	<tbody>  
    		{% for lands in result %}
    		<tr>    	
          <td>{{ loop.index }}</td>			
          <td>{{ lands.location }}</td>
    			<td>{{ lands.field_area }}</td>
    			<td>{{ lands.variety }}</td>
    			<td>{{ lands.bags }}</td>
    			<td>{{ lands.sowing_date }}</td>
          <td>{{ lands.expected_harvest }}</td>
    		</tr>
    		{% endfor %}
    	</tbody>    	
    </table>   

    {% else %}
    <div class="col text-center">      
      <p class="fs-4">No Sowing Data for {{ season }} {{ year }}</p>
    </div> 
    {% endif %}

  {% else %}    
  <div class="col text-center">      
    <p class="fs-4">Enter Year and Season to display data</p>
  </div>  

  <!-- form to input land location and ID for removal-->
  <form action="{{ url_for('data.view_sowing') }}", method="POST" novalidate class="g-3 rounded-3 bg-light px-2">
    {{ form.csrf_token() }}

      <!-- row 1-->
      <div class="row mb-2">                        
          <div class="form-group col">
              {{ form.year.label }}
              {{ form.year(class="form-control", id="floatingInput") }}
              {% for error in form.year.errors %}
              <small class="form-text text-muted">{{ error }}</small>  
              {% endfor %}
          </div>  

          <div class="form-group col">
              {{ form.season.label }}
              <div class="mt-2">
                {% for subfield in form.season %}                                           
                    {{ subfield(id="floatingInput") }}
                    {{ subfield.label }}                                    
                {% endfor %} 
              </div>                 
          </div> 

          <div class="col align-items-center text-center mt-3">
              {{ form.submit(class="align-items-center btn btn-primary") }}
          </div>                 
      </div>          
  </form>    

	{% endif %}    
    	
</div>
{% endblock %}